{"ast":null,"code":"import { HttpClient } from \"@angular/common/http\";\nimport { distinctUntilChanged, filter, switchMap } from \"rxjs\";\nimport { Store } from \"@ngrx/store\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@ngrx/store\";\nexport let UserServiceForPrivateThings = /*#__PURE__*/(() => {\n  class UserServiceForPrivateThings {\n    constructor(http, store) {\n      this.http = http;\n      this.store = store;\n      this.url = \"/api/users\";\n    }\n    getAllUsers() {\n      return this.http.get(this.url);\n    }\n    getUserDetails(userId) {\n      return this.http.get(`${this.url}/${userId}`);\n    }\n    listenToUserChanges() {\n      return this.store.select('selectedUserId').pipe(distinctUntilChanged(),\n      // מונע קריאות כפולות אם ה-ID לא השתנה\n      filter(userId => !!userId),\n      // מבטיח שהערך אינו ריק\n      switchMap(userId => this.getUserDetails(userId)) // ביטול קריאה קודמת במקרה של שינוי\n      );\n    }\n    static {\n      this.ɵfac = function UserServiceForPrivateThings_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || UserServiceForPrivateThings)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Store));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: UserServiceForPrivateThings,\n        factory: UserServiceForPrivateThings.ɵfac\n      });\n    }\n  }\n  return UserServiceForPrivateThings;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}